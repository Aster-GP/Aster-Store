{"version":3,"sources":["webpack:///./src/views/Menu.vue?bca2","webpack:///src/views/Menu.vue","webpack:///./src/views/Menu.vue?d2ce","webpack:///./src/views/Menu.vue","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","search","model","value","callback","$$v","valueName","expression","active","_l","item","index","key","title","$event","goDetail","pid","smallImg","_v","_s","name","enname","price","staticRenderFns","component","$","$map","map","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","target","proto","forced","callbackfn","arguments","length","undefined"],"mappings":"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","file":"js/chunk-48a2584d.2b4ecebb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"menu\"},[_c('van-search',{attrs:{\"placeholder\":\"请输入搜索关键词\"},on:{\"input\":_vm.search},model:{value:(_vm.valueName),callback:function ($$v) {_vm.valueName=$$v},expression:\"valueName\"}}),_c('van-tabs',{attrs:{\"type\":\"card\"},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},_vm._l((_vm.shopTypeList),function(item,index){return _c('van-tab',{key:index,attrs:{\"title\":item.title}},_vm._l((_vm.currentData),function(item,index){return _c('div',{key:index,staticClass:\"shop-item-info\",on:{\"click\":function($event){return _vm.goDetail(item.pid)}}},[_c('div',{staticClass:\"adjust-box\"},[_c('div',{staticClass:\"shop-item-img\"},[_c('img',{staticClass:\"auto-img\",attrs:{\"src\":item.smallImg,\"alt\":\"\"}})]),_c('div',{staticClass:\"shop-item-desc\"},[_c('div',{staticClass:\"shop-name\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"shop-name-box\"},[_c('div',{staticClass:\"ename\"},[_vm._v(_vm._s(item.enname))]),_c('div',{staticClass:\"price\"},[_vm._v(\"￥\"+_vm._s(item.price))])])])])])}),0)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"menu\">\r\n        <van-search v-model=\"valueName\" placeholder=\"请输入搜索关键词\" @input=\"search\"/>\r\n        <van-tabs type=\"card\" v-model=\"active\">\r\n            <van-tab v-for=\"(item,index) in shopTypeList\" :key=\"index\" \r\n            :title=\"item.title\">\r\n                <div class=\"shop-item-info\" v-for=\"(item,index) in currentData\" \r\n                :key=\"index\" @click=\"goDetail(item.pid)\">\r\n                    <div class=\"adjust-box\">\r\n                        <div class=\"shop-item-img\">\r\n                        <img  class=\"auto-img\" :src=\"item.smallImg\" alt=\"\">\r\n                    </div>\r\n                    <div class=\"shop-item-desc\">\r\n                        <div class=\"shop-name\">{{item.name}}</div> \r\n                        <div class=\"shop-name-box\">\r\n                            <div class=\"ename\">{{item.enname}}</div>    \r\n                            <div class=\"price\">￥{{item.price}}</div>\r\n                        </div>\r\n                    </div>\r\n                    </div>                 \r\n                </div>\r\n            </van-tab>\r\n        </van-tabs>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import '../assets/less/menu.less'\r\n    export default {\r\n        name: 'Menu',\r\n        data(){\r\n            return {\r\n                active: 0,\r\n                shopTypeList:[\r\n                    {title: '推荐'},\r\n                    {title: '拿铁'},\r\n                    {title: '咖啡'},\r\n                    {title: '瑞纳冰'},\r\n                ],\r\n                currentData: [],\r\n                // 搜索商品名\r\n                valueName: '',\r\n            }\r\n        },\r\n        created(){\r\n            this.getType();\r\n        },\r\n        // 监听状态\r\n        watch: {\r\n           active(newData){\r\n               this.currentIndex = newData;\r\n               this.getTypeProducts(newData);\r\n           }\r\n        },  \r\n        methods: {\r\n            //获取商品类型数据\r\n            getType(){\r\n                let tokenString = localStorage.getItem('token');\r\n                // if(!tokenString){\r\n                //     this.$toast(\"请登录\");\r\n                //     // return this.$router.push({name:'Login'});\r\n                // }\r\n                this.$toast.loading({\r\n                    message: \"加载中...\",\r\n                    forbidClick: true,\r\n                    duration: 0\r\n                });\r\n\r\n                this.axios({\r\n                    method: \"GET\",\r\n                    url: '/type',\r\n                    params:{\r\n                        appkey: this.appkey\r\n                    }\r\n                }).then(res => {\r\n                    this.$toast.clear();\r\n                    if(res.data.code == 400){\r\n                        let data = res.data.result;\r\n                        data.unshift({\r\n                            typeDesc: '推荐',\r\n                            type: 'isHot'\r\n                        });\r\n                        this.shopTypeList.map(v => {\r\n                            for(let i = 0; i < data.length; i++){\r\n                                if(v.title == data[i].typeDesc){\r\n                                    v.type = data[i].type;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        })\r\n                    }\r\n                   this.getTypeProducts(0);\r\n                })\r\n            },\r\n            //根据类型获取商品数据\r\n            getTypeProducts(index){\r\n                this.currentData = [];\r\n                let key = '';\r\n                if(index == 0){\r\n                    this.shopTypeList[index].type = 1;\r\n                    key = 'isHot';\r\n                }else{\r\n                    key = 'type';\r\n                }\r\n\r\n                let tokenString = localStorage.getItem('token');\r\n                if(!tokenString){\r\n                    this.$toast(\"请登录\");\r\n                    // return this.$router.push({name:'Login'});\r\n                }\r\n                this.$toast.loading({\r\n                    message: \"加载中...\",\r\n                    forbidClick: true,\r\n                    duration: 0\r\n                });\r\n\r\n                this.axios({\r\n                    method: \"GET\",\r\n                    url: '/typeProducts',\r\n                    params:{\r\n                        appkey: this.appkey,\r\n                        key,\r\n                        value: this.shopTypeList[index].type\r\n                    }\r\n                }).then(res => {\r\n                    this.$toast.clear();\r\n                    res.data.result.map(v => {\r\n                        this.currentData.push(v);\r\n                    })\r\n                })\r\n            },\r\n            //跳转到详情页\r\n            goDetail(pid){\r\n                this.$router.push({name: 'Detail',params:{pid}});\r\n            },\r\n            search(val){\r\n                if(val == ''){\r\n                    return;\r\n                }\r\n                this.currentData = [];\r\n                let tokenString = localStorage.getItem('token');\r\n                if(!tokenString){\r\n                    this.$toast(\"请登录\");\r\n                    return this.$router.push({name:'Login'});\r\n                }\r\n                this.$toast.loading({\r\n                    message: \"加载中...\",\r\n                    forbidClick: true,\r\n                    duration: 0\r\n                });\r\n\r\n                this.axios({\r\n                    method: \"GET\",\r\n                    url: '/search',\r\n                    params:{\r\n                        appkey: this.appkey,\r\n                        name: val\r\n                    }\r\n                }).then(res => { \r\n                    this.$toast.clear();\r\n                    if(res.data.code == 'Q001'){\r\n                        if( res.data.result == ''){\r\n                            this.$toast(\"没有该商品哦！\");\r\n                        }\r\n                        res.data.result.map(v => {\r\n                            this.currentData.push(v);\r\n                        })\r\n                    }\r\n                })\r\n            }\r\n\r\n        },\r\n    }\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Menu.vue?vue&type=template&id=60955870&\"\nimport script from \"./Menu.vue?vue&type=script&lang=js&\"\nexport * from \"./Menu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}