(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-004d76b6"],{"03a8":function(t,e,o){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,o){return e&&s(t.prototype,e),o&&s(t,o),t}o.d(e,"a",(function(){return c}));o("e7e5");var r=o("d399"),i=o("2b0e");i["a"].use(r["a"]);var l=function(){function t(){a(this,t)}return n(t,[{key:"verify",value:function(t){for(var e in t)if(!t[e].reg.test(t[e].value))return Object(r["a"])({message:t[e].errorMsg,position:"middle"}),!1;return!0}}]),t}(),c=new l},"266d":function(t,e,o){"use strict";o("b08c")},"305b":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"secure"},[o("van-nav-bar",{attrs:{title:"个人资料","left-text":"返回","left-arrow":""},on:{"click-left":t.black}}),o("BgBox",[o("van-cell-group",[o("van-cell",{attrs:{title:"修改密码","is-link":""},on:{click:t.popup}}),o("van-popup",{style:{height:"30%"},attrs:{closeable:"","close-icon":"close",position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[o("van-field",{attrs:{name:"旧密码",label:"旧密码",placeholder:"6-16位密码",autocomplete:"off"},model:{value:t.password.oldPassword,callback:function(e){t.$set(t.password,"oldPassword",e)},expression:"password.oldPassword"}}),o("van-field",{attrs:{name:"新密码",label:"新密码",placeholder:"6-16位密码",autocomplete:"off"},model:{value:t.password.newPassword,callback:function(e){t.$set(t.password,"newPassword",e)},expression:"password.newPassword"}}),o("van-button",{attrs:{type:"primary",round:"",color:"linear-gradient(to right, #ff6034, #ee0a24)",size:"large"},on:{click:t.updatePassword}},[t._v("确认修改")])],1),o("van-cell",{attrs:{title:"注销账号","is-link":""},on:{click:t.Dialog}})],1)],1),o("van-button",{attrs:{type:"primary",round:"",color:"linear-gradient(to right, #ff6034, #ee0a24)",size:"large"},on:{click:t.exitLogin}},[t._v("退出登录")])],1)},s=[],n=o("03a8"),r=o("928f"),i={name:"Secure",components:{BgBox:r["a"]},data:function(){return{show:!1,password:{oldPassword:"",newPassword:""}}},methods:{black:function(){this.$router.go(-1)},popup:function(){this.show=!this.show},updatePassword:function(){var t=this,e={oldPassword:{value:this.password.oldPassword,errorMsg:"旧密码由数字字母下划线组合(6-16字符)",reg:/^[A-Za-z]\w{5,15}$/},newPassword:{value:this.password.newPassword,errorMsg:"新密码由数字字母下划线组合(6-16字符)",reg:/^[A-Za-z]\w{5,15}$/}},o=n["a"].verify(e);if(o&&this.password.oldPassword==this.password.newPassword)this.$toast("新密码与旧密码不能相同");else{var a=localStorage.getItem("token");if(!a)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/updatePassword",data:{appkey:this.appkey,tokenString:a,password:this.password.newPassword,oldPassword:this.password.oldPassword}}).then((function(e){t.$toast.clear(),700==result.data.code?t.$router.push({name:"Login"}):"E001"==result.data.code&&setTimeout((function(){localStorage.removeItem("token"),t.$router.push({name:"Login"})}),500),t.$toast(e.data.msg)})).catch((function(e){t.$toast.clear()}))}},Dialog:function(){var t=this;this.$dialog.confirm({title:"注销账号",message:"是否确认注销账号，一旦确认无法恢复！",theme:"round-button"}).then((function(){var e=localStorage.getItem("token");if(!e)return t.$toast("请先登录"),t.$router.push({name:"Login"});t.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),t.axios({method:"POST",url:"/destroyAccount",data:{appkey:t.appkey,tokenString:e}}).then((function(e){t.$toast.clear(),700==e.data.code?t.$router.push({name:"Login"}):"G001"==e.data.code&&setTimeout((function(){localStorage.removeItem("token"),t.$router.push({name:"Login"})}),500),t.$toast(e.data.msg)})).catch((function(e){t.$toast.clear()}))})).catch((function(){}))},exitLogin:function(){var t=this,e=localStorage.getItem("token");if(!e)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/logout",data:{appkey:this.appkey,tokenString:e}}).then((function(e){t.$toast.clear(),700==e.data.code?t.$router.push({name:"Login"}):"F001"==e.data.code&&setTimeout((function(){localStorage.removeItem("token"),t.$router.push({name:"Login"})}),500),t.$toast(e.data.msg)})).catch((function(e){t.$toast.clear()}))}}},l=i,c=(o("266d"),o("2877")),u=Object(c["a"])(l,a,s,!1,null,"e5707e86",null);e["default"]=u.exports},"54af":function(t,e,o){"use strict";o("e9f0")},"928f":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"bg-box"},[o("div",{staticClass:"bg"}),o("div",{staticClass:"bg-content"},[t._t("default")],2)])},s=[],n={name:"BgBox"},r=n,i=(o("54af"),o("2877")),l=Object(i["a"])(r,a,s,!1,null,"9f535710",null);e["a"]=l.exports},b08c:function(t,e,o){},e9f0:function(t,e,o){}}]);
//# sourceMappingURL=chunk-004d76b6.800c5f3f.js.map