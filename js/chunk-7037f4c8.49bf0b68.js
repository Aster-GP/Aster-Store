(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7037f4c8"],{3174:function(t,e,a){},"54af":function(t,e,a){"use strict";a("e9f0")},"76a1":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pay"},[a("van-nav-bar",{attrs:{title:"订单结算","left-text":"返回","left-arrow":""},on:{"click-left":t.black}}),a("BgBox",[a("van-tabs",{on:{click:t.toggleIndex},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabList,(function(e,i){return a("van-tab",{key:i,attrs:{title:e.title}},t._l(t.orderData,(function(e,i){return a("div",{key:i,staticClass:"shop-item"},[a("div",{staticClass:"shop-item-info"},[a("div",{staticClass:"orderNum"},[t._v(t._s(e.oid))]),t._l(e.data,(function(e,i){return a("div",{key:i,staticClass:"item-list"},[a("div",{staticClass:"shop-item-img"},[a("img",{attrs:{src:e.smallImg,alt:""}})]),a("div",{staticClass:"shop-item-desc"},[a("div",{staticClass:"shop-name"},[a("div",[t._v(t._s(e.name))]),a("div",{staticClass:"condit"},[t._v(t._s(e.rule))])]),a("div",{staticClass:"ename"},[t._v(t._s(e.enname))]),a("div",{staticClass:"shopPrice-box"},[a("div",{staticClass:"price"},[t._v("￥"+t._s(e.price))]),a("div",{staticClass:"count"},[t._v("x"+t._s(e.count))])])])])})),a("div",{directives:[{name:"show",rawName:"v-show",value:2!==t.currentIndex,expression:"currentIndex !== 2"}],staticClass:"receive",on:{click:function(a){return t.receive(e,i)}}},[t._v("确认收货")]),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.currentIndex,expression:"currentIndex == 2"}],staticClass:"del",on:{click:function(a){return t.delOrder(e,i)}}},[t._v("删除订单")]),a("div",{staticClass:"total"},[a("div",{staticClass:"total-count"},[t._v("共计 "+t._s(e.count)+" 件商品")]),a("div",{staticClass:"total-price"},[t._v(" 合计：￥ "),a("span",[t._v(t._s(t._f("decimal")(e.total)))])])])],2)])})),0)})),1)],1)],1)},s=[],n=(a("d81d"),a("a434"),a("3174"),a("928f")),r={name:"Pay",components:{BgBox:n["a"]},data:function(){return{active:0,orderData:[],tabList:[{title:"全部"},{title:"待收货"},{title:"已收货"}],currentIndex:0}},created:function(){this.getOrder(0)},methods:{black:function(){this.$router.go(-1)},toggleIndex:function(t){this.currentIndex=t,this.getOrder(t)},getOrder:function(t){var e=this,a=localStorage.getItem("token");if(!a)return this.$toast("请登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/findOrder",params:{appkey:this.appkey,tokenString:a,status:t}}).then((function(t){if(e.$toast.clear(),7e4==t.data.code){var a=[];t.data.result.map((function(t){for(var e=0;e<a.length;e++)if(a[e].oid==t.oid)return a[e].data.push(t),a[e].count+=t.count,void(a[e].total+=t.count*t.price);var i={};i.oid=t.oid,i.count=t.count,i.total=t.count*t.price,i.status=t.status,i.date=t.createdAt,i.data=[t],a.push(i)})),e.orderData=a}})).catch((function(t){e.$toast.clear()}))},receive:function(t,e){var a=this,i=localStorage.getItem("token");if(!i)return this.$toast("请登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/receive",data:{appkey:this.appkey,tokenString:i,oid:t.oid}}).then((function(i){a.$toast.clear(),8e4==i.data.code&&(1==a.currentIndex&&a.orderData.splice(e,1),t.status=2),a.$toast(i.data.msg)}))},delOrder:function(t,e){var a=this,i=localStorage.getItem("token");if(!i)return this.$toast("请登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/removeOrder",data:{appkey:this.appkey,tokenString:i,oid:t.oid}}).then((function(t){a.$toast.clear(),9e4==t.data.code&&a.orderData.splice(e,1)}))}}},o=r,c=a("2877"),l=Object(c["a"])(o,i,s,!1,null,null,null);e["default"]=l.exports},"928f":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg-box"},[a("div",{staticClass:"bg"}),a("div",{staticClass:"bg-content"},[t._t("default")],2)])},s=[],n={name:"BgBox"},r=n,o=(a("54af"),a("2877")),c=Object(o["a"])(r,i,s,!1,null,"9f535710",null);e["a"]=c.exports},a434:function(t,e,a){"use strict";var i=a("23e7"),s=a("23cb"),n=a("a691"),r=a("50c4"),o=a("7b0b"),c=a("65f0"),l=a("8418"),d=a("1dde"),u=a("ae40"),v=d("splice"),f=u("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,p=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!v||!f},{splice:function(t,e){var a,i,d,u,v,f,k=o(this),_=r(k.length),x=s(t,_),C=arguments.length;if(0===C?a=i=0:1===C?(a=0,i=_-x):(a=C-2,i=p(h(n(e),0),_-x)),_+a-i>m)throw TypeError(g);for(d=c(k,i),u=0;u<i;u++)v=x+u,v in k&&l(d,u,k[v]);if(d.length=i,a<i){for(u=x;u<_-i;u++)v=u+i,f=u+a,v in k?k[f]=k[v]:delete k[f];for(u=_;u>_-i+a;u--)delete k[u-1]}else if(a>i)for(u=_-i;u>x;u--)v=u+i-1,f=u+a-1,v in k?k[f]=k[v]:delete k[f];for(u=0;u<a;u++)k[u+x]=arguments[u+2];return k.length=_-i+a,d}})},d81d:function(t,e,a){"use strict";var i=a("23e7"),s=a("b727").map,n=a("1dde"),r=a("ae40"),o=n("map"),c=r("map");i({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},e9f0:function(t,e,a){}}]);
//# sourceMappingURL=chunk-7037f4c8.49bf0b68.js.map