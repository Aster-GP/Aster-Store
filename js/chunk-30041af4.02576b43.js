(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30041af4"],{"03a8":function(e,s,o){"use strict";function t(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function a(e,s){for(var o=0;o<s.length;o++){var t=s[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function n(e,s,o){return s&&a(e.prototype,s),o&&a(e,o),e}o.d(s,"a",(function(){return c}));o("e7e5");var r=o("d399"),i=o("2b0e");i["a"].use(r["a"]);var l=function(){function e(){t(this,e)}return n(e,[{key:"verify",value:function(e){for(var s in e)if(!e[s].reg.test(e[s].value))return Object(r["a"])({message:e[s].errorMsg,position:"middle"}),!1;return!0}}]),e}(),c=new l},a342:function(e,s,o){},a55b:function(e,s,o){"use strict";o.r(s);var t=function(){var e=this,s=e.$createElement,o=e._self._c||s;return o("div",{staticClass:"login"},[o("div",{staticClass:"mask"}),o("van-nav-bar",{staticClass:"nav-bar",attrs:{fixed:"",border:!0},scopedSlots:e._u([{key:"left",fn:function(){return[o("div",{staticClass:"logo iconfont icon-coffee"}),o("div",{staticClass:"logo-title"},[e._v("Aster铺")])]},proxy:!0},{key:"right",fn:function(){return[o("div",{staticClass:"right-txt",on:{click:e.goPage}},[e._v("先逛一逛 ")])]},proxy:!0}])}),o("div",{staticClass:"login-box"},[o("div",{staticClass:"welcome"},[e._v("欢迎回来！")]),o("div",{staticClass:"login-desc"},[e._v("Please login to your accounts")]),o("div",{staticClass:"formInfo"},[o("van-form",[o("van-field",{attrs:{name:"手机号",label:"手机号",placeholder:"手机号",autocomplete:"off"},model:{value:e.userInfo.phone,callback:function(s){e.$set(e.userInfo,"phone",s)},expression:"userInfo.phone"}}),o("van-field",{attrs:{type:e.isLoginPassword?"password":"text",name:"密码",label:"密码",placeholder:"密码","right-icon":e.isLoginPassword?"closed-eye":"eye-o",autocomplete:"off"},on:{"click-right-icon":e.toggleLoginPasswordType},model:{value:e.userInfo.password,callback:function(s){e.$set(e.userInfo,"password",s)},expression:"userInfo.password"}}),o("div",{staticClass:"forgot"},[o("span",{on:{click:e.forgotPassword}},[e._v(" 忘记密码? ")])]),o("div",{staticClass:"login-btn"},[o("van-button",{attrs:{round:"",block:"",color:"#07c160",type:"info","native-type":"submit"},on:{click:e.login}},[e._v(" 登录 ")])],1)],1)],1),o("van-button",{staticClass:"register",attrs:{type:"info",round:""},on:{click:e.registerInfo}},[e._v("注册")]),o("van-popup",{attrs:{closeable:"",round:"",position:"bottom"},model:{value:e.show,callback:function(s){e.show=s},expression:"show"}},[o("div",{staticClass:"register-title"},[e._v("注册")]),o("van-form",{staticClass:"register-van-form"},[o("van-field",{attrs:{name:"手机号",label:"手机号",placeholder:"手机号",autocomplete:"off"},model:{value:e.userRegisterInfo.phone,callback:function(s){e.$set(e.userRegisterInfo,"phone",s)},expression:"userRegisterInfo.phone"}}),o("van-field",{attrs:{name:"用户名",label:"用户名",placeholder:"用户名",autocomplete:"off"},model:{value:e.userRegisterInfo.nickName,callback:function(s){e.$set(e.userRegisterInfo,"nickName",s)},expression:"userRegisterInfo.nickName"}}),o("van-field",{attrs:{type:e.isRegisterPassword?"password":"text",name:"密码",label:"密码",placeholder:"密码","right-icon":e.isRegisterPassword?"closed-eye":"eye-o",autocomplete:"off"},on:{"click-right-icon":e.toggleRegisterPasswordType},model:{value:e.userRegisterInfo.password,callback:function(s){e.$set(e.userRegisterInfo,"password",s)},expression:"userRegisterInfo.password"}}),o("div",{staticClass:"login-btn"},[o("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"},on:{click:e.register}},[e._v(" 注册 ")])],1)],1)],1)],1)],1)},a=[],n=(o("c25d"),o("a342"),o("03a8")),r={name:"Login",data:function(){return{userInfo:{phone:"",password:""},userRegisterInfo:{phone:"",password:"",nickName:""},show:!1,isLoginPassword:!0,isRegisterPassword:!0}},methods:{registerInfo:function(){this.show=!0},toggleLoginPasswordType:function(){this.isLoginPassword=!this.isLoginPassword},toggleRegisterPasswordType:function(){this.isRegisterPassword=!this.isRegisterPassword},register:function(){var e=this,s={phone:{value:this.userRegisterInfo.phone,errorMsg:"手机号格式不正确",reg:/^1[0-9]{10}$/},password:{value:this.userRegisterInfo.password,errorMsg:"密码由数字字母下划线组合(6-16字符)",reg:/^[A-Za-z]\w{5,15}$/},nickName:{value:this.userRegisterInfo.nickName,errorMsg:"昵称格式不正确",reg:/^[\u4E00-\u9FA5A-Za-z0-9_]+$/}},o=n["a"].verify(s);if(o){var t=Object.assign({},this.userRegisterInfo);t.appkey=this.appkey,this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/register",data:t}).then((function(s){e.$toast.clear(),100==s.data.code?e.show=!1:e.$toast(s.data.msg)})).catch((function(s){e.$toast.clear()})),this.show=!1}},login:function(){var e=this,s={phone:{value:this.userInfo.phone,errorMsg:"手机号格式不正确",reg:/^1[0-9]{10}$/},password:{value:this.userInfo.password,errorMsg:"密码格式不正确",reg:/^[A-Za-z]\w{5,15}$/}},o=n["a"].verify(s);if(o){var t=Object.assign({},this.userInfo);t.appkey=this.appkey,this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/login",data:t}).then((function(s){e.$toast.clear(),200==s.data.code?(localStorage.setItem("token",s.data.token),e.$router.push({name:"Home"})):e.$toast(s.data.msg)})).catch((function(s){e.$toast.clear()}))}},forgotPassword:function(){this.$router.push({name:"FindPassword"})},goPage:function(){this.$router.push({name:"Home"})}}},i=r,l=o("2877"),c=Object(l["a"])(i,t,a,!1,null,null,null);s["default"]=c.exports},c25d:function(e,s,o){}}]);
//# sourceMappingURL=chunk-30041af4.02576b43.js.map